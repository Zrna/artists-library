(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t){e.exports="https://cors-anywhere.herokuapp.com/"},28:function(e,t,a){},39:function(e,t,a){e.exports=a(66)},49:function(e,t,a){},50:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=(a(44),a(12)),i=a(13),s=a(16),u=a(14),m=a(17),d=a(8),f="GET_API_DATA",p="SHOW_PROFILE",h=a(15),g=a.n(h),b=function(e){return function(t){var a="".concat(g.a,'https://api.deezer.com/search?q=artist:"').concat(e,'"');fetch(a).then(function(e){return e.json()}).then(function(e){console.log(e);var a=e.data[0],n=function(e){var t="";for(var a in e.data){var n=e.data[a];t+="".concat(n.title,", ")}return t}(e),r={artistId:a.artist.id,artistName:a.artist.name,artistImg:a.artist.picture_medium,audio:a.preview,songName:n,showPreview:!0,loader:!1};t({type:f,payload:r})}).catch(function(a){console.log(a);var n={};/^\s+$/.test(e)||""===e?t({type:f,payload:n={error:"Input field can't be empty!",loader:!1}}):(n={error:"Unable to find ".concat(e),loader:!1},t({type:f,payload:n}))})}},v=a(11),E=a(34),w=a(18),y={artistName:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,a=Object(w.a)({},e);switch(t.type){case f:return Object(w.a)({},a,{artistId:t.payload.artistId,artistName:t.payload.artistName,artistImg:t.payload.artistImg,audio:t.payload.audio,songName:t.payload.songName,error:t.payload.error,loader:t.payload.loader,showPreview:t.payload.showPreview});default:return a}},N={numAlbums:0,numFans:0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=Object(w.a)({},e);switch(t.type){case p:return Object(w.a)({},e,{numAlbums:t.payload.numAlbums,numFans:t.payload.numFans,showProfile:t.payload.showProfile});default:return a}},I=Object(v.c)({getDataReducer:O,showProfileReducer:j}),P=[E.a],D=Object(v.e)(I,Object(v.d)(v.a.apply(void 0,P),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),A=a(70),k=(a(28),a(67)),R=a(68),S=a(69),_=(a(49),function(){return r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),F=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getApiData=function(){e.setState({loader:!0});var t=e.state.inputValue;e.props.getApiData(t)},e.updateInputValue=function(t){var a=t.target.value;e.setState({inputValue:a,error:"",showPreview:!1})},e.inputEnterSubmit=function(t){"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),e.getApiData())},e.state={inputValue:"",loader:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center pb-4"},"Search for your favorite music artist"),r.a.createElement(k.a,null,r.a.createElement(R.a,{value:this.state.inputValue,onChange:this.updateInputValue,placeholder:"Type artist name",onKeyDown:this.inputEnterSubmit}),r.a.createElement(S.a,{type:"submit",color:"primary",onClick:this.getApiData},"Search")),this.state.loader&&!1!==this.props.loader?r.a.createElement(_,null):null,r.a.createElement("p",{className:"error-msg"},this.props.error))}}]),t}(n.Component),C=Object(d.b)(function(e){return{error:e.getDataReducer.error,loader:e.getDataReducer.loader}},{getApiData:b})(F),x=(a(50),Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,artistName:e.getDataReducer.artistName,artistImg:e.getDataReducer.artistImg}},null)(function(e){return r.a.createElement("div",{className:"text-center",style:{backgroundColor:"#f5f5f5"}},r.a.createElement("img",{src:e.artistImg,alt:e.artistName,onClick:e.showProfile,className:"previewImg"}),r.a.createElement("p",{className:"artist-name"},e.artistName))})),T=a(75),V=a(71),W=a(72),U=a(73),L=a(74),z=a(36),X=a.n(z),B=(a(53),a(25)),J=a.n(B),Z=a(37),$=a(26),q=(a(56),function(e){var t=Object(n.useState)(null),a=Object($.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(null),i=Object($.a)(c,2),s=i[0],u=i[1],m=Object(n.useCallback)(Object(Z.a)(J.a.mark(function t(){var a,n,r;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(g.a,"https://api.deezer.com"),t.next=4,fetch("".concat(a,"/artist/").concat(e.artistId,"/related"));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,l(r.data),u(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),u("Unable to find related artists");case 16:case"end":return t.stop()}},t,null,[[0,12]])})),[e.artistId]);Object(n.useEffect)(function(){m()},[]);return r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",null,r.a.createElement("p",null,"Related artists")),s,o&&o.slice(0,14).map(function(e,t){return r.a.createElement("div",{key:t,className:"related-artist-box"},r.a.createElement("img",{src:e.picture,alt:e.name,className:"relatedImg"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"Fans: ",e.nb_fan))}))}),G=Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,artistName:e.getDataReducer.artistName,artistImg:e.getDataReducer.artistImg,audio:e.getDataReducer.audio,songName:e.getDataReducer.songName,numFans:e.showProfileReducer.numFans,numAlbums:e.showProfileReducer.numAlbums}},null)(function(e){return r.a.createElement("div",null,r.a.createElement(T.a,{isOpen:e.modal},r.a.createElement(A.a,null,r.a.createElement(V.a,{toggle:e.close},e.artistName),r.a.createElement(W.a,null,r.a.createElement(U.a,null,r.a.createElement(L.a,{sm:"4",md:"5",lg:"4"},r.a.createElement("img",{src:e.artistImg,alt:e.artistName,className:"mb-4"})),r.a.createElement(L.a,{sm:"8",md:"7",lg:"8"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users",title:"Fans"}),e.numFans),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-music",title:"Number of albums"}),e.numAlbums),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-microphone",title:"Songs"}),e.songName),r.a.createElement(X.a,{src:e.audio,controls:!0}))),r.a.createElement(U.a,null,r.a.createElement(q,{artistId:e.artistId}))))))}),H=(a(64),function(){return r.a.createElement("footer",null,r.a.createElement(A.a,null,r.a.createElement("p",null,"All results depends on the Deezer API"),r.a.createElement("p",null,"Made by",r.a.createElement("a",{href:"https://github.com/Zrna",target:"_blank",rel:"noopener noreferrer"}," Luka Zrnic "))))}),K={artistId:null,modal:!1},M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getArtistProfileData=function(){var t=e.props.artistId;e.props.showProfile(t)},e.showProfile=function(){e.setState(function(e){return{modal:!e.modal}}),e.getArtistProfileData()},e.reset=function(){e.setState(K)},e.state=K,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement(A.a,{className:"container-center"},r.a.createElement(C,null),this.props.showPreview?r.a.createElement(x,{showProfile:this.showProfile}):null,r.a.createElement(G,{close:this.reset,modal:this.state.modal,toggle:this.toggle}))),r.a.createElement(H,null))}}]),t}(n.Component),Q=Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,showPreview:e.getDataReducer.showPreview,showProfile:e.showProfileReducer.showProfile}},{getApiData:b,showProfile:function(e){return function(t){var a="".concat(g.a,"https://api.deezer.com/artist/").concat(e);fetch(a).then(function(e){return e.json()}).then(function(e){var a={numAlbums:e.nb_album,numFans:e.nb_fan,showProfile:!0};t({type:p,payload:a})}).catch(function(e){return console.log(e)}),console.log(D.getState())}}})(M),Y=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null))}}]),t}(n.Component),ee=(a(65),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function te(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(d.a,{store:D},r.a.createElement(Y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/artists-library",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/artists-library","/service-worker.js");ee?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):te(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):te(t,e)})}}()}},[[39,1,2]]]);
//# sourceMappingURL=main.611228d0.chunk.js.map