(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t){e.exports="https://cors-anywhere.herokuapp.com/"},28:function(e,t,a){},39:function(e,t,a){e.exports=a(66)},49:function(e,t,a){},50:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),o=(a(44),a(12)),s=a(13),i=a(16),u=a(14),m=a(17),d=a(8),p="GET_API_DATA",f="SHOW_PROFILE",h=a(15),E=a.n(h),g=function(e){return function(t){var a="".concat(E.a,'https://api.deezer.com/search?q=artist:"').concat(e,'"');fetch(a).then(function(e){return e.json()}).then(function(e){console.log(e);var a=e.data[0],n=function(e){var t="";for(var a in e.data){var n=e.data[a];t+="".concat(n.title,", ")}return t}(e),r={artistId:a.artist.id,artistName:a.artist.name,artistImg:a.artist.picture_medium,audio:a.preview,songName:n,showPreview:!0,loader:!1};t({type:p,payload:r})}).catch(function(a){console.log(a);var n={};/^\s+$/.test(e)||""===e?t({type:p,payload:n={error:"Input field can't be empty!",loader:!1}}):(n={error:"Unable to find ".concat(e),loader:!1},t({type:p,payload:n}))})}},b=a(11),v=a(34),w=a(18),O={artistName:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,a=Object(w.a)({},e);switch(t.type){case p:return Object(w.a)({},a,{artistId:t.payload.artistId,artistName:t.payload.artistName,artistImg:t.payload.artistImg,audio:t.payload.audio,songName:t.payload.songName,error:t.payload.error,loader:t.payload.loader,showPreview:t.payload.showPreview});default:return a}},N={numAlbums:0,numFans:0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=Object(w.a)({},e);switch(t.type){case f:return Object(w.a)({},e,{numAlbums:t.payload.numAlbums,numFans:t.payload.numFans,showProfile:t.payload.showProfile});default:return a}},I=Object(b.c)({getDataReducer:y,showProfileReducer:j}),D=[v.a],P=Object(b.e)(I,Object(b.d)(b.a.apply(void 0,D),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),R=a(70),A=(a(28),a(67)),_=a(68),k=a(69),S=(a(49),function(){return r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),F=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getApiData=function(){e.setState({loader:!0});var t=e.state.inputValue;e.props.getApiData(t)},e.updateInputValue=function(t){var a=t.target.value;e.setState({inputValue:a,error:"",showPreview:!1})},e.inputEnterSubmit=function(t){"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),e.getApiData())},e.state={inputValue:"",loader:!1},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"text-center pb-4"},"Search for your favorite music artist"),r.a.createElement(A.a,null,r.a.createElement(_.a,{value:this.state.inputValue,onChange:this.updateInputValue,placeholder:"Type artist name",onKeyDown:this.inputEnterSubmit}),r.a.createElement(k.a,{type:"submit",color:"primary",onClick:this.getApiData},"Search")),this.state.loader&&!1!==this.props.loader?r.a.createElement(S,null):null,r.a.createElement("p",{className:"error-msg"},this.props.error))}}]),t}(n.Component),x=Object(d.b)(function(e){return{error:e.getDataReducer.error,loader:e.getDataReducer.loader}},{getApiData:g})(F),C=(a(50),Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,artistName:e.getDataReducer.artistName,artistImg:e.getDataReducer.artistImg}},null)(function(e){return r.a.createElement("div",{className:"text-center",style:{backgroundColor:"#f5f5f5"}},r.a.createElement("img",{src:e.artistImg,alt:e.artistName,onClick:e.showProfile,className:"previewImg"}),r.a.createElement("p",{className:"artist-name"},e.artistName))})),V=a(75),T=a(71),z=a(72),L=a(73),U=a(74),X=a(36),J=a.n(X),q=(a(53),a(25)),B=a.n(q),G=a(37),H=a(26),K=(a(56),function(e){var t=Object(n.useState)(null),a=Object(H.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(null),s=Object(H.a)(o,2),i=s[0],u=s[1],m=Object(n.useCallback)(Object(G.a)(B.a.mark(function t(){var a,n,r;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(E.a,"https://api.deezer.com"),t.next=4,fetch("".concat(a,"/artist/").concat(e.artistId,"/related"));case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,c(r.data),u(null),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),u("Unable to find related artists");case 16:case"end":return t.stop()}},t,null,[[0,12]])})),[e.artistId]);Object(n.useEffect)(function(){m()},[]);return r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",null,r.a.createElement("p",null,"Related artists")),i,l&&l.slice(0,14).map(function(e,t){return r.a.createElement("div",{key:t,className:"related-artist-box"},r.a.createElement("img",{src:e.picture,alt:e.name,className:"relatedImg"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"Fans: ",e.nb_fan))}))}),M=Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,artistName:e.getDataReducer.artistName,artistImg:e.getDataReducer.artistImg,audio:e.getDataReducer.audio,songName:e.getDataReducer.songName,numFans:e.showProfileReducer.numFans,numAlbums:e.showProfileReducer.numAlbums}},null)(function(e){return r.a.createElement("div",null,r.a.createElement(V.a,{isOpen:e.modal},r.a.createElement(R.a,null,r.a.createElement(T.a,{toggle:e.close},e.artistName),r.a.createElement(z.a,null,r.a.createElement(L.a,null,r.a.createElement(U.a,{sm:"4",md:"5",lg:"4"},r.a.createElement("img",{src:e.artistImg,alt:e.artistName,className:"mb-4"})),r.a.createElement(U.a,{sm:"8",md:"7",lg:"8"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users",title:"Fans"}),e.numFans),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-music",title:"Number of albums"}),e.numAlbums),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-microphone",title:"Songs"}),e.songName),r.a.createElement(J.a,{src:e.audio,controls:!0}))),r.a.createElement(L.a,null,r.a.createElement(K,{artistId:e.artistId}))))))}),W=(a(64),function(){return r.a.createElement("footer",null,r.a.createElement(R.a,null,r.a.createElement("p",null,"All results depends on the Deezer API"),r.a.createElement("p",null,"Made by",r.a.createElement("a",{href:"http://www.lukazrnic.com",target:"_blank",rel:"noopener noreferrer"},"Luka Zrnic"))))}),Z={artistId:null,modal:!1},$=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getArtistProfileData=function(){var t=e.props.artistId;e.props.showProfile(t)},e.showProfile=function(){e.setState(function(e){return{modal:!e.modal}}),e.getArtistProfileData()},e.reset=function(){e.setState(Z)},e.state=Z,e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("section",null,r.a.createElement(R.a,{className:"container-center"},r.a.createElement(x,null),this.props.showPreview?r.a.createElement(C,{showProfile:this.showProfile}):null,r.a.createElement(M,{close:this.reset,modal:this.state.modal,toggle:this.toggle}))),r.a.createElement(W,null))}}]),t}(n.Component),Q=Object(d.b)(function(e){return{artistId:e.getDataReducer.artistId,showPreview:e.getDataReducer.showPreview,showProfile:e.showProfileReducer.showProfile}},{getApiData:g,showProfile:function(e){return function(t){var a="".concat(E.a,"https://api.deezer.com/artist/").concat(e);fetch(a).then(function(e){return e.json()}).then(function(e){var a={numAlbums:e.nb_album,numFans:e.nb_fan,showProfile:!0};t({type:f,payload:a})}).catch(function(e){return console.log(e)}),console.log(P.getState())}}})($),Y=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Q,null))}}]),t}(n.Component);a(65);c.a.render(r.a.createElement(d.a,{store:P},r.a.createElement(Y,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.08c4a223.chunk.js.map