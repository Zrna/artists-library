(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(52)},35:function(e,t,a){},36:function(e,t,a){},39:function(e,t,a){},42:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(8),s=a.n(l),c=(a(34),a(9)),i=a(10),o=a(12),u=a(11),m=a(13),f=a(28),p=a(53),h=a(58),d=a(59),E=a(60),g=(a(35),a(36),function(e){return r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:e.profileImg,alt:e.artistName,onClick:e.showProfile,className:"previewImg"}),r.a.createElement("p",{className:"artist-name"},e.artistName))}),b=a(61),v=a(54),N=a(55),w=a(56),I=a(57),j=a(24),O=a.n(j),k=(a(39),a(15)),S=a.n(k),y=a(25),A=a(16),P=(a(42),function(e){var t=Object(n.useState)(null),a=Object(A.a)(t,2),l=a[0],s=a[1],c=Object(n.useState)(null),i=Object(A.a)(c,2),o=i[0],u=i[1],m=Object(n.useCallback)(Object(y.a)(S.a.mark(function t(){var a,n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/artist/".concat(e.artistId,"/related"));case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,s(n.data),u(null),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0),u("Unable to find related artists");case 15:case"end":return t.stop()}},t,null,[[0,11]])})),[e.artistId]);Object(n.useEffect)(function(){m()},[]);return r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",null,r.a.createElement("p",null,"Related artists")),o,l&&l.slice(0,14).map(function(e,t){return console.log(e),r.a.createElement("div",{key:t,className:"related-artist-box"},r.a.createElement("img",{src:e.picture,alt:e.name,className:"relatedImg"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"Fans: ",e.nb_fan))}))}),D=function(e){return r.a.createElement("div",null,r.a.createElement(b.a,{isOpen:e.modal},r.a.createElement(p.a,null,r.a.createElement(v.a,{toggle:e.close},e.artistName),r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(I.a,{sm:"4"},r.a.createElement("img",{src:e.profileImg,alt:e.artistName,className:"mb-4"})),r.a.createElement(I.a,{sm:"8"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-users mr-4",title:"Fans"}),e.numFans),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-music mr-4",title:"Number of albums"}),e.numAlbums),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-microphone mr-4",title:"Songs"}),e.songName),r.a.createElement(O.a,{src:e.audio,controls:!0}))),r.a.createElement(w.a,null,r.a.createElement(P,{artistId:e.artistId}))))))},F=(a(50),function(){return r.a.createElement("footer",null,r.a.createElement(p.a,null,r.a.createElement("p",null,"All results depends on the Deezer API"),r.a.createElement("p",null,"Made by"," ",r.a.createElement("a",{href:"http://www.lukazrnic.com",target:"_blank",rel:"noopener noreferrer"},"Luka Zrnic"))))}),V={inputValue:"",artistImg:"",artistName:"",artistId:null,numFans:null,numAlbums:null,audio:"",songName:"",showProfile:!1,relatedArtist:"",error:"",modal:!1},x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).updateInputValue=function(t){var a=t.target.value;e.setState({inputValue:a,showProfile:!1,error:""})},e.getApiData=function(){var t='/search?q=artist:"'.concat(e.state.inputValue,'"');fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({songName:"",showProfile:!1}),e.setData(t)}).catch(function(t){/^\s+$/.test(e.state.inputValue)||""===e.state.inputValue?e.setState({error:"Input field can't be empty!"}):e.setState({error:"Unable to find ".concat(e.state.inputValue)})})},e.setData=function(t){console.log(t);var a=t.data[0],n=a.artist.id,r=a.artist.name,l=a.artist.picture_medium,s=a.preview,c=function(a){var n=t.data[a],r="".concat(n.title,", ");e.setState(function(e){return{songName:[].concat(Object(f.a)(e.songName),[r])}})};for(var i in t.data)c(i);e.setState({artistId:n,artistName:r,artistImg:l,audio:s})},e.getArtistProfileData=function(){var t="/artist/".concat(e.state.artistId);fetch(t).then(function(e){return e.json()}).then(function(t){var a=t.nb_album,n=t.nb_fan;e.setState({numAlbums:a,numFans:n})}).catch(function(e){return console.log(e)})},e.inputEnterSubmit=function(t){"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),e.getApiData())},e.showProfile=function(){e.setState(function(e){return{modal:!e.modal,showProfile:!0}}),e.getArtistProfileData()},e.reset=function(){e.setState(V)},e.state=V,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("section",null,r.a.createElement(p.a,{className:"container-center"},r.a.createElement("h1",{className:"text-center pb-4"},"Search for your favorite music artist"),r.a.createElement(h.a,null,r.a.createElement(d.a,{value:this.inputValue,onChange:this.updateInputValue,placeholder:"Type artist name",onKeyDown:this.inputEnterSubmit}),r.a.createElement(E.a,{type:"submit",color:"primary",onClick:this.getApiData},"Search")),r.a.createElement("p",{className:"error-msg"},this.state.error),this.state.showProfile?r.a.createElement(D,{profileImg:this.state.artistImg,artistName:this.state.artistName,artistId:this.state.artistId,numFans:this.state.numFans,numAlbums:this.state.numAlbums,songName:this.state.songName,audio:this.state.audio,close:this.reset,modal:this.state.modal,toggle:this.toggle}):r.a.createElement(g,{profileImg:this.state.artistImg,artistName:this.state.artistName,showProfile:this.showProfile}))),r.a.createElement(F,null))}}]),t}(n.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(x,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(51);s.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.d8535f4f.chunk.js.map